<header>
  <nav>
    <div class="nav-center">
      <div class="logo">
        <a href="/"><strong>GadgetCatalog</strong></a>
      </div>
      <ul class="menu">
        <li class="dropdown">
          <a href="/products">Products</a>
          <div class="dropdown-content">
            <div class="dropdown-inner">
              <div class="column">
                <p>Monitors</p>
                <ul>
                  <li>
                    <a href="/products/benq-zowie-xl2411k"
                      >BenQ Zowie XL2411K</a
                    >
                  </li>
                  <li>
                    <a href="/products/alienware-3225qf"
                      >Alienware 3225QF</a
                    >
                  </li>
                  <li>
                    <a href="/products/xiaomi-curved-gaming"
                      >Xiaomi Curved Gaming</a
                    >
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>Webcams</p>
                <ul>
                  <li>
                    <a href="/products/nexigo-n60">NexiGo N60</a>
                  </li>
                  <li>
                    <a href="/products/logitech-brio-100"
                      >Logitech Brio 100</a
                    >
                  </li>
                  <li>
                    <a href="/products/emeet-smartcam-c960"
                      >EMEET SmartCam C960</a
                    >
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>Mice</p>
                <ul>
                  <li>
                    <a href="/products/logitech-g-pro-x-superlight-2"
                      >Logitech G PRO X Superlight 2</a
                    >
                  </li>
                  <li>
                    <a href="/products/logitech-mx-master-3s"
                      >Logitech MX Master 3S</a
                    >
                  </li>
                  <li>
                    <a href="/products/razer-cobra-pro"
                      >Razer Cobra Pro</a
                    >
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>Headphones</p>
                <ul>
                  <li>
                    <a href="/products/hyperx-cloud-2"
                      >HyperX Cloud 2</a
                    >
                  </li>
                  <li>
                    <a href="/products/logitech-g733"
                      >Logitech G733</a
                    >
                  </li>
                  <li>
                    <a href="/products/audeze-maxwell-wireless"
                      >Audeze Maxwell Wireless</a
                    >
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>Speakers</p>
                <ul>
                  <li>
                    <a href="/products/jbl-flip-6">JBL Flip 6</a>
                  </li>
                  <li>
                    <a href="/products/pioneer-dj-dm-50d">Pioneer DJ DM-50D</a>
                  </li>
                  <li>
                    <a href="/products/creative-pebble-pro">Creative Pebble Pro</a>
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>Microphones</p>
                <ul>
                  <li>
                    <a href="/products/blue-yeti">Blue Yeti</a>
                  </li>
                  <li>
                    <a href="/products/shure-mv7i">Shure MV7i</a
                    >
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>Keyboards</p>
                <ul>
                  <li>
                    <a href="/products/aula-f75">Aula F75</a>
                  </li>
                  <li>
                    <a href="/products/keychron-k8-pro">Keychron K8 Pro</a
                    >
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>PC Controllers</p>
                <ul>
                  <li>
                    <a href="/products/razer-wolverine-v2-pro">Razer Wolverine V2 Pro</a
                    >
                  </li>
                  <li>
                    <a href="/products/gamesir-cyclone-2">GameSir Cyclone 2</a
                    >
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>Graphics Tablets</p>
                <ul>
                  <li>
                    <a href="/products/wacom-ctl472">Wacom CTL472</a
                    >
                  </li>
                  <li>
                    <a href="/products/huion-kamvas-pro-27">HUION Kamvas Pro 27</a
                    >
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>Storage</p>
                <ul>
                  <li>
                    <a href="/products/synology-ds923">Synology DS923</a
                    >
                  </li>
                  <li>
                    <a href="/products/toshiba-canvio-advanced">Toshiba Canvio Advanced</a
                    >
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>Networks</p>
                <ul>
                  <li>
                    <a href="/products/tp-link-archer-t3u">TP-Link Archer T3U</a
                    >
                  </li>
                  <li>
                    <a href="/products/asus-usb-ac53">Asus USB-AC53</a
                    >
                  </li>
                </ul>
              </div>
              <div class="column">
                <p>Cables</p>
                <ul>
                  <li>
                    <a href="/products/dbillionda-cat8-ethernet">DbillionDa Cat8 Ethernet</a
                    >
                  </li>
                  <li>
                    <a href="/products/nothing-cable-usb-c-c">Nothing Cable USB-C-C</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </li>
        <li><a href="/about">About Us</a></li>
        <li><a href="/contact">Contact</a></li>
      </ul>
    </div>
    <!-- Search Icon and Expandable Search Bar -->
    <div class="search-container">
      <button id="searchToggle" class="search-icon-btn" aria-label="Open search">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="11" cy="11" r="7" stroke="#222" stroke-width="2"/>
          <line x1="16.4142" y1="16" x2="21" y2="20.5858" stroke="#222" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <section class="product-search-bar collapsed" id="headerSearchBar">
        <input
          type="text"
          id="searchInput"
          placeholder="Search productsâ€¦"
        />
        <select id="categorySelect">
          <option value="">All Categories</option>
          <option value="headphones">Headphones</option>
          <option value="keyboards">Keyboards</option>
          <option value="mice">Mice</option>
          <option value="monitors">Monitors</option>
          <option value="webcams">Webcams</option>
          <option value="speakers">Speakers</option>
          <option value="microphones">Microphones</option>
          <option value="pc controllers">PC Controllers</option>
          <option value="graphics tablets">Graphics Tablets</option>
          <option value="storage">Storage</option>
          <option value="networks">Networks</option>
          <option value="cables">Cables</option>
        </select>
      </section>
    </div>
  </nav>
</header>
<script>
// Toggle search bar in header
const searchToggle = document.getElementById('searchToggle');
const headerSearchBar = document.getElementById('headerSearchBar');
if (searchToggle && headerSearchBar) {
  searchToggle.addEventListener('click', () => {
    headerSearchBar.classList.toggle('collapsed');
    if (!headerSearchBar.classList.contains('collapsed')) {
      headerSearchBar.querySelector('input').focus();
    }
  });
}

// Header search functionality: redirect to /products with query params
const headerSearchInput = document.querySelector('#headerSearchBar #searchInput');
const headerCategorySelect = document.querySelector('#headerSearchBar #categorySelect');
if (headerSearchInput && headerCategorySelect) {
  function goToProductSearch() {
    const search = encodeURIComponent(headerSearchInput.value.trim());
    const category = encodeURIComponent(headerCategorySelect.value);
    let url = '/products';
    const params = [];
    if (search) params.push(`search=${search}`);
    if (category) params.push(`category=${category}`);
    if (params.length) url += '?' + params.join('&');
    // If already on /products, update the product list dynamically
    if (window.location.pathname === '/products') {
      // Update the search bar in the main section if present
      const mainSearchInput = document.getElementById('searchInput');
      const mainCategorySelect = document.getElementById('categorySelect');
      if (mainSearchInput && mainCategorySelect) {
        mainSearchInput.value = headerSearchInput.value;
        mainCategorySelect.value = headerCategorySelect.value;
      }
      // Trigger the fetchProducts function if available
      if (typeof fetchProducts === 'function') fetchProducts();
      // Collapse the header search bar
      headerSearchBar.classList.add('collapsed');
    } else {
      window.location.href = url;
    }
  }
  headerSearchInput.addEventListener('keydown', e => {
    if (e.key === 'Enter') goToProductSearch();
  });
  headerCategorySelect.addEventListener('change', goToProductSearch);
}
</script>
